import{a as ne,c as re}from"./chunk-AYAYEPGU.js";import{B as _e,b as ae,c as tt,d as se,e as h,f as M,g as P,h as B,i as E,j as ce,k as R,l as le,m as de,n as me,o as D,p as pe,q as ue,r as F,s as fe,u as et,v as he,w as ge,x as I,y as ve,z as L}from"./chunk-7FKMJB2O.js";import"./chunk-MZIHDHKH.js";import"./chunk-WXI33M2S.js";import{a as ft,c as ie,e as oe,n as be,p as Ce,q as V,r as ht}from"./chunk-TSC7LLWG.js";import{d as X,k as Jt,l as Kt,n as Xt,o as te,r as ee}from"./chunk-E453JAQM.js";import{$ as x,$a as Lt,Aa as Q,Ab as qt,B as St,Ba as Nt,Bb as $t,C as Mt,Db as l,E as Pt,Fa as Tt,Fb as C,Gb as Zt,Hb as Ht,Ib as mt,J as Et,Jb as Gt,Kb as pt,Lb as A,Ma as W,Mb as Qt,Nb as J,Pa as c,Q as Dt,Qa as d,V as at,Va as At,W as w,X as Z,Xa as Bt,Xb as Wt,Ya as Rt,Z as st,_a as b,a as $,aa as j,ab as ct,b as Ct,ea as O,fa as f,ga as H,gb as Vt,ha as It,hc as K,ia as Ot,ib as m,ic as ut,kb as lt,la as Ft,lb as Ut,mb as zt,n as _t,nb as U,o as xt,ob as z,pa as N,pb as a,qa as T,qb as r,r as k,ra as kt,rb as p,tb as Y,wb as g,xb as S,y as yt,ya as jt,yb as Yt,z as wt,za as G,zb as dt}from"./chunk-4D2YIMKC.js";var xe=(()=>{let t=class t{transform(i,e,n){if(!i||!i.length)return[];let u=(e-1)*n,y=e*n;return i.slice(u,y)}};t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=Ot({name:"pagination",type:t,pure:!0,standalone:!0});let o=t;return o})();var _=(()=>{let t=class t{constructor(i){this.http=i,this.base=`${_e.API_URL}/auth`}get(i){let e=new ft;return e=e.set("search",i.search),e=e.set("limit",i.limit),e=e.set("skip",i.skip),this.http.get(`${this.base}/products/search`,{params:e}).pipe(k(n=>({metadata:{limit:n.limit,skip:n.skip,total:n.total},data:n.products})))}create(i){return this.http.post(`${this.base}/products/add`,i)}update(i,e){return delete e.id,this.http.put(`${this.base}/products/${i}`,$({},e))}delete(i){let e=new ft;return e=e.set("id",i),this.http.delete(`${this.base}/products`,{params:e,responseType:"text"})}findById(i){return this.http.get(`${this.base}/products/${i}`,{context:new ie().set(ne,!0)}).pipe(Mt(e=>(console.log(e.message),e?.message?.includes("Status 404")?(console.log(e.message),_t(null)):xt(()=>e))))}};t.\u0275fac=function(e){return new(e||t)(x(oe))},t.\u0275prov=w({token:t,factory:t.\u0275fac,providedIn:"root"});let o=t;return o})();var ot=class{static productAlreadyExist(t){return s=>wt(200).pipe(Dt(()=>t.findById(s.value.id).pipe(k(i=>i?{alreadyExist:!0}:null))))}};var He=()=>({alreadyExist:"Ya fue registrado previamente este producto"}),Ge=()=>({minlength:"Titulo requiere minimo 5 caracteres"}),nt=(()=>{let t=class t{constructor(i){this.fb=i}ngOnInit(){this.initCreateForm()}initCreateForm(){this.productForm=this.fb.group({id:this.fb.control(null,{nonNullable:!0,validators:[h.required,h.minLength(3),h.maxLength(10)]}),description:this.fb.control(null,{nonNullable:!0,validators:[h.required,h.minLength(5),h.maxLength(255)]}),title:this.fb.control(null,{nonNullable:!0,validators:[h.required,h.minLength(5),h.maxLength(100)]}),price:this.fb.control(null,{nonNullable:!0,validators:[h.required,h.min(1),h.max(200)]}),category:this.fb.control(null,{nonNullable:!0,validators:[h.required,h.minLength(5),h.maxLength(100)]})})}registerOnChange(i){this.productForm.valueChanges.subscribe(i)}registerOnTouched(i){this.productForm.valueChanges.subscribe(i)}registerOnValidatorChange(i){this.productForm.valueChanges.subscribe(i)}setDisabledState(i){i?this.productForm.disable():this.productForm.enable()}writeValue(i){this.productForm.patchValue(i,{emitEvent:!1})}get invalid(){return this.productForm.invalid}validate(i){return this.productForm.valid?null:{address:!0}}};t.\u0275fac=function(e){return new(e||t)(d(D))},t.\u0275cmp=f({type:t,selectors:[["app-product-form"]],features:[Zt([{provide:ae,useExisting:at(()=>t),multi:!0},{provide:se,useExisting:at(()=>t),multi:!0}])],decls:24,vars:5,consts:[[1,"product__form",3,"formGroup"],[1,"product__form__group"],[1,"product__form__group__input-group"],["for","id"],["type","text","placeholder","ID","formControlName","id","maxlength","10",1,"form-control",3,"customErrors"],["for","title"],["type","text","placeholder","Titulo","formControlName","title","maxlength","100",1,"form-control",3,"customErrors"],["for","description"],["type","text","placeholder","Descripci\xF3n","formControlName","description","maxlength","200",1,"form-control"],["for","logo"],["type","number","placeholder","Precio","formControlName","price",1,"form-control"],["for","date_release"],["type","text","placeholder","Categoria","formControlName","category",1,"form-control"]],template:function(e,n){e&1&&(a(0,"form",0)(1,"div",1)(2,"div",2)(3,"label",3),l(4,"ID"),r(),p(5,"input",4),r(),a(6,"div",2)(7,"label",5),l(8,"Titulo"),r(),p(9,"input",6),r()(),a(10,"div",2)(11,"div",2)(12,"label",7),l(13,"Descripci\xF3n"),r(),p(14,"input",8),r(),a(15,"div",2)(16,"label",9),l(17,"Precio"),r(),p(18,"input",10),r()(),a(19,"div",2)(20,"div",2)(21,"label",11),l(22,"Categoria"),r(),p(23,"input",12),r()()()),e&2&&(m("formGroup",n.productForm),c(5),m("customErrors",mt(3,He)),c(4),m("customErrors",mt(4,Ge)))},dependencies:[E,tt,ce,M,P,me,le,de,I],styles:[".product[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;padding:4rem}.product__title[_ngcontent-%COMP%]{font-size:2rem;font-weight:700}.product__form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.25rem}.product__form__group[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:2rem}.product__form__group__input-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.product__form__actions[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;padding-top:2rem;gap:1rem}.product__form__actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:50%;min-height:40px;padding:.5rem}.is-loading[_ngcontent-%COMP%]{padding-right:36px;background-image:url(/assets/svg/spinner.svg);background-repeat:no-repeat;background-position:right 8px center}"],changeDetection:0});let o=t;return o})();var Me=(()=>{let t=class t{constructor(i,e,n){this.fb=i,this.productService=e,this.toastService=n,this.createProductForm=this.fb.control(null,{asyncValidators:ot.productAlreadyExist(this.productService)})}create(){let i=this.createProductForm.getRawValue();this.productService.create(i).subscribe({next:()=>{this.toastService.success({title:"Exito",message:"Se creo nuevo producto exitosamente"})}})}};t.\u0275fac=function(e){return new(e||t)(d(D),d(_),d(L))},t.\u0275cmp=f({type:t,selectors:[["app-create-product"]],decls:11,vars:2,consts:[[1,"create-product"],[1,"create-product__title"],[1,"w-full"],[3,"formControl"],[1,"create-product__actions"],["type","button","routerLink","/product","data-test","btn-back",1,"button--secondary"],["type","button",1,"button",3,"click","disabled"]],template:function(e,n){e&1&&(a(0,"main",0)(1,"h1",1),l(2,"Formulario de Registro"),r(),p(3,"hr",2),a(4,"form"),p(5,"app-product-form",3),r(),a(6,"div",4)(7,"button",5),l(8," Atras "),r(),a(9,"button",6),g("click",function(){return n.create()}),l(10," Enviar "),r()()()),e&2&&(c(5),m("formControl",n.createProductForm),c(4),m("disabled",n.createProductForm.invalid))},dependencies:[V,E,M,P,B,R,I,nt],styles:[".create-product[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;padding:4rem}.create-product__title[_ngcontent-%COMP%]{font-size:2rem;font-weight:700}.create-product__actions[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;padding-top:2rem;gap:1rem}.create-product__actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:50%;min-height:40px;padding:.5rem}.is-loading[_ngcontent-%COMP%]{padding-right:36px;background-image:url(/assets/svg/spinner.svg);background-repeat:no-repeat;background-position:right 8px center}"],changeDetection:0});let o=t;return o})();function Pe(o=200){return function(t){return t.pipe(Pt(o),Et())}}var Ee=(()=>{let t=class t{constructor(){this._initialData=b([]),this.dataFilter=b([])}setInitialData(i){this._initialData.set(i)}filterData(i,e){return i?(this.dataFilter.set([...this._initialData()]),i=i.toLowerCase().trim(),this.dataFilter().filter(n=>e.some(u=>n[u]?.toString().toLowerCase()?.includes(i)))):this._initialData()}};t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=w({token:t,factory:t.\u0275fac,providedIn:"root"});let o=t;return o})();var Ke=(o,t)=>t.id,Xe=o=>["update",o];function ti(o,t){if(o&1&&(a(0,"th",6),l(1),r()),o&2){let s=t.$implicit;c(),C(" ",s," ")}}function ei(o,t){if(o&1){let s=Y();a(0,"tr",7)(1,"td",10),p(2,"img",11),r(),a(3,"td",12),l(4),r(),a(5,"td",13),l(6),r(),a(7,"td",14),l(8),r(),a(9,"td",15),l(10),A(11,"date"),r(),a(12,"td",16),l(13),A(14,"date"),r(),a(15,"td",17)(16,"div",18)(17,"button",19)(18,"div",20),p(19,"span",21),a(20,"span",22),g("confirm",function(){let e=N(s).$implicit,n=S();return T(n.confirmDelete(e.id))}),r()()()()()()}if(o&2){let s=t.$implicit;c(2),m("src",s.thumbnail,W)("alt",s.title),c(2),C(" ",s.id," "),c(2),C(" ",s.title," "),c(2),C(" ",s.description," "),c(2),C(" ",J(11,9,s.meta.createdAt,"YYYY/MM/dd","+0000")," "),c(3),C(" ",J(14,13,s.meta.updatedAt,"YYYY/MM/dd","+0000")," "),c(6),m("routerLink",Gt(17,Xe,s.id)),c(),m("message","\xBFEsta seguro de eliminar el producto "+s.title+" ?")}}var De=(()=>{let t=class t{constructor(i,e,n,u){this.productService=i,this.filterService=e,this.fb=n,this.toastService=u,this.filter=this.fb.control("",{nonNullable:!0}),this.listProduct=b([]),this.displayedColumns=["","","Nombre","Descripci\xF3n","Creacion","Actualizaci\xF3n",""],this.filterColumns=["id","title","description"],this.pagination=Lt(F),this.paginationOptions=b({limit:100,skip:0,search:""})}ngOnInit(){this.getInitialProducts(),this.onChangeFilter()}getInitialProducts(){this.productService.get(this.paginationOptions()).subscribe({next:({data:i})=>{this.filterService.setInitialData(i),this.listProduct.set(i)}})}onChangeFilter(){this.filter.valueChanges.pipe(Pe()).subscribe(i=>{let e=this.filterService.filterData(i,this.filterColumns);this.listProduct.set(e),this.pagination().currentPage.set(1)})}confirmDelete(i){this.productService.delete(i).subscribe({next:()=>{this.getInitialProducts(),this.toastService.success({title:"Exito",message:"Se elimino el producto de manera exitosa"})}})}};t.\u0275fac=function(e){return new(e||t)(d(_),d(Ee),d(D),d(L))},t.\u0275cmp=f({type:t,selectors:[["app-list-product"]],viewQuery:function(e,n){e&1&&qt(n.pagination,F,5),e&2&&$t()},decls:16,vars:8,consts:[[1,"p-10"],[1,"search-form"],["data-test","input-search-product","type","search","aria-label","search","placeholder","Buscar",1,"search-form__input",3,"formControl"],["type","button","routerLink","create","data-test","btn-add",1,"search-form__add","button"],[1,"icon","icon-plus"],[1,"rwd-table"],["data-test","table-column"],["tabindex","0"],[1,"product-paginator"],["firstLastButtons","",3,"pageSize","collectionSize","maxSize"],["data-th","Logo"],["height","100","width","100",3,"src","alt"],["data-th","ID"],["data-th","Nombre"],["data-th","Descripcion"],["data-th","Fecha Craci\xF3n"],["data-th","Fecha Actualizaci\xF3n"],["data-th","Acciones",1,"table-actions"],[1,"dropdown"],["tabindex","-1","data-test","btn-dropdown","type","button","aria-label","dropdown-options",1,"dropdown-button"],["data-test","dropdown-content",1,"dropdown-content"],["tabindex","0","role","button","data-test","btn-edit",1,"icon","icon-[tabler--pencil]",2,"height","1.25rem","width","1.25rem",3,"routerLink"],["tabindex","0","role","button","data-test","btn-delete","appConfirmDialog","","title","Eliminar Registro","cancelButtonText","Cancelar","confirmButtonText","Confirmar",1,"icon","icon-[tabler--letter-x]",2,"height","1.25rem","width","1.25rem",3,"confirm","message"]],template:function(e,n){if(e&1&&(a(0,"main",0)(1,"form",1),p(2,"input",2),a(3,"button",3),p(4,"span",4),l(5,"Agregar "),r()(),a(6,"table",5)(7,"tbody")(8,"tr"),U(9,ti,2,1,"th",6,zt),r(),U(11,ei,21,19,"tr",7,Ke),A(13,"pagination"),r()(),a(14,"div",8),p(15,"app-pagination",9),r()()),e&2){let u;c(2),m("formControl",n.filter),c(7),z(n.displayedColumns),c(2),z(J(13,4,n.listProduct(),n.pagination().currentPage(),(u=n.pagination())==null?null:u.pageSize())),c(4),m("pageSize",5)("collectionSize",n.listProduct().length)("maxSize",2)}},dependencies:[et,V,ge,E,tt,M,P,B,R,F,I,Xt,xe],styles:[".search-form[_ngcontent-%COMP%]{margin:auto;width:95%;padding-bottom:2rem;min-width:30%;max-width:100%;display:flex;flex-direction:row;justify-content:space-between;gap:1rem}.search-form__input[_ngcontent-%COMP%]{width:80%}.search-form__add[_ngcontent-%COMP%]{width:20%}@media (width < 768px){.search-form[_ngcontent-%COMP%]{flex-direction:column}.search-form__input[_ngcontent-%COMP%]{width:100%}.search-form__add[_ngcontent-%COMP%]{min-height:2.25rem;width:100%}}.product-paginator[_ngcontent-%COMP%]{margin:auto;width:95%;min-width:300px;max-width:100%}"],changeDetection:0});let o=t;return o})();var Ie=(()=>{let t=class t{constructor(i,e,n,u){this.activatedRoute=i,this.fb=e,this.productService=n,this.toastService=u,this.updateProductForm=this.fb.control(null),this.product=fe(this.activatedRoute.data.pipe(k(y=>y.product)))}ngOnInit(){this.initUpdateForm(this.product())}initUpdateForm(i){this.updateProductForm.setValue(i)}update(){let i=this.updateProductForm.getRawValue();this.productService.update(i.id,i).subscribe({next:()=>{this.toastService.success({title:"Exito",message:"Se actualizo exitosamente el registro"})}})}};t.\u0275fac=function(e){return new(e||t)(d(be),d(D),d(_),d(L))},t.\u0275cmp=f({type:t,selectors:[["app-update-product"]],decls:11,vars:2,consts:[[1,"update-product"],[1,"update-product___title"],[1,"w-full"],[3,"formControl"],[1,"update-product__actions"],["type","button","routerLink","/product","data-test","btn-back",1,"button--secondary"],["type","button",1,"button",3,"click","disabled"]],template:function(e,n){e&1&&(a(0,"main",0)(1,"h1",1),l(2,"Editar Registro"),r(),p(3,"hr",2),a(4,"form"),p(5,"app-product-form",3),r(),a(6,"div",4)(7,"button",5),l(8," Atras "),r(),a(9,"button",6),g("click",function(){return n.update()}),l(10," Actualizar "),r()()()),e&2&&(c(5),m("formControl",n.updateProductForm),c(4),m("disabled",n.updateProductForm.invalid))},dependencies:[V,E,M,P,B,R,I,nt],styles:[".update-product[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;padding:4rem}.update-product__title[_ngcontent-%COMP%]{font-size:2rem;font-weight:700}.update-product__actions[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;padding-top:2rem;gap:1rem}.update-product__actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:50%;min-height:40px;padding:.5rem}"],changeDetection:0});let o=t;return o})();var Oe=(o,t,s=j(_))=>{let i=j(Ce),e=o.params.id;return s.findById(e).pipe(St(n=>n?!0:(i.navigate(["error"]),!1)))};var Fe=new st("REQUEST"),ko=new st("RESPONSE");var ke=o=>["Android","MacIntel","Motorola","Nintendo","iPhone","iPad","iPod","Windows Phone","BlackBerry","Mobile"].some(s=>o?.includes(s));var q=(()=>{let t=class t{constructor(i,e){this.platformId=i,this.request=e,ee(this.platformId)?this.userAgent=this.request?.headers?.["user-agent"]||"":this.userAgent=navigator.userAgent}isMobile(){return ke(this.userAgent)}};t.\u0275fac=function(e){return new(e||t)(x(Tt),x(Fe,8))},t.\u0275prov=w({token:t,factory:t.\u0275fac,providedIn:"root"});let o=t;return o})();var je=()=>j(q).isMobile(),Ne=()=>!j(q).isMobile();var Te=(()=>{let t=class t{};t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=f({type:t,selectors:[["app-product-detail"]],decls:3,vars:3,template:function(e,n){e&1&&(a(0,"div"),l(1),A(2,"json"),r()),e&2&&(c(),C(" ",Qt(2,1,n.data)," "))},dependencies:[te],changeDetection:0});let o=t;return o})();var rt=(()=>{let t=class t{constructor(i,e,n){this.appRef=i,this.injector=e,this.document=n,this._listModalComponentRef=[]}get listModalComponentRef(){return this._listModalComponentRef}open(i,e){return this.options=e,this.openWithComponent(e??{},i)}getProjectNodes(i,e){return i?.mode==="bottom-sheet"?[[],[e.location.nativeElement]]:[[e.location.nativeElement],[]]}openWithComponent(i,e){let n=ut(e,{environmentInjector:this.injector});return this.newModalComponent=ut(Ae,{environmentInjector:this.injector,projectableNodes:this.getProjectNodes(i,n)}),this._listModalComponentRef.push(this.newModalComponent),this.newModalComponent.instance.mode.set(i?.mode||"modal"),this.newModalComponent.instance.style.set(i?.style||{}),n.instance.modalInstance=this.newModalComponent.instance,n.instance.data=i?.data??null,this.newModalComponent.instance.closed.subscribe(()=>{n.destroy(),this._listModalComponentRef.pop()}),this.document.body.appendChild(this.newModalComponent.location.nativeElement),this.appRef.attachView(n.hostView),this.appRef.attachView(this.newModalComponent.hostView),n}};t.\u0275fac=function(e){return new(e||t)(x(Wt),x(Ft),x(X))},t.\u0275prov=w({token:t,factory:t.\u0275fac,providedIn:"root"});let o=t;return o})();var ni=[[["","modalBody",""]],[["","bottomSheetBody",""]]],ri=["[modalBody]","[bottomSheetBody]"],ai=(o,t)=>({fadeInDown:o,fadeOutUp:t}),si=(o,t)=>({slideInBottom:o,slideInTop:t});function ci(o,t){if(o&1){let s=Y();a(0,"div",1)(1,"button",2),g("click",function(){N(s);let e=S();return T(e.close())}),l(2," \xD7 "),r(),dt(3,0,["#element",""]),r(),a(4,"div",3),g("click",function(){N(s);let e=S();return T(e.close())}),r()}if(o&2){let s=S();lt("modal-content",s.setting().isModal)("dialog-content",s.setting().isDialog),m("ngStyle",s.style())}}function li(o,t){if(o&1){let s=Y();a(0,"div",3),g("click",function(){N(s);let e=S();return T(e.close())}),r(),a(1,"div",4),dt(2,1),r()}if(o&2){let s=S();c(),m("ngClass",pt(2,si,s.show()&&s.setting().isBottomSheet,!s.show()&&s.setting().isBottomSheet))("ngStyle",s.style())}}var Ae=(()=>{let t=class t{constructor(i,e,n,u){this.modalHost=i,this.document=e,this.renderer2=n,this.modalService=u,this.show=b(!0),this.mode=ct("modal"),this.style=ct({}),this.setting=K(()=>({isModal:this.mode()==="modal",isDialog:this.mode()==="dialog",isBottomSheet:this.mode()==="bottom-sheet"})),this.closed=new Nt}ngOnInit(){this.hiddenScroll()}hiddenScroll(){this.htmlBaseElement=this.document.getElementsByTagName("html")[0],this.htmlBaseElement.style.overflowY="hidden"}addScroll(){this.modalService.listModalComponentRef.length===0&&this.renderer2.setStyle(this.htmlBaseElement,"overflowY","visible")}open(){this.show.set(!0)}close(){this.show.set(!1),setTimeout(()=>{this.closed.emit(),this.modalHost.nativeElement.remove(),this.addScroll()},300)}};t.\u0275fac=function(e){return new(e||t)(d(Q),d(X),d(At),d(rt))},t.\u0275cmp=f({type:t,selectors:[["app-modal"]],inputs:{mode:[O.SignalBased,"mode"],style:[O.SignalBased,"style"]},outputs:{mode:"modeChange",style:"styleChange",closed:"closed"},standalone:!0,features:[Ht],ngContentSelectors:ri,decls:3,vars:11,consts:[["role","dialog",3,"ngClass"],[3,"ngStyle"],["type","button","role","close menu",1,"btn-close-modal",3,"click"],[1,"bottom-sheet-container__outside",3,"click"],[1,"bottom-sheet-container__content",3,"ngClass","ngStyle"]],template:function(e,n){e&1&&(Yt(ni),a(0,"div",0),Vt(1,ci,5,5)(2,li,3,5),r()),e&2&&(lt("modal-container",n.setting().isModal)("dialog-container",n.setting().isDialog)("bottom-sheet-container",n.setting().isBottomSheet),m("ngClass",pt(8,ai,n.setting().isModal||n.setting().isDialog,!n.show()&&(n.setting().isModal||n.setting().isDialog))),c(),Ut(1,n.setting().isBottomSheet?2:1))},dependencies:[Jt,Kt],styles:['.modal-content[_ngcontent-%COMP%]{margin-right:auto;left:0;right:0;text-align:center;min-height:90dvh;height:90dvh;overflow-y:scroll;max-height:80vh;top:5%;width:90%;margin-left:auto;background:#fff;border-radius:10px;position:absolute;scrollbar-color:transparent transparent}@media (width > 700px){.modal-content[_ngcontent-%COMP%]{width:50%}}@media (width > 1110px){.modal-content[_ngcontent-%COMP%]{width:40%}}.modal-container[_ngcontent-%COMP%]{position:fixed;background-color:#4a4a50cc;height:100%;width:100%;bottom:0;left:0;z-index:1000;display:inline-block}.dialog-container[_ngcontent-%COMP%]{overflow-y:auto;grid-template-columns:auto minmax(0,1fr) auto;display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start top top-end" "center-start center center-end" "bottom-start bottom-center bottom-end";grid-template-rows:minmax(min-content,auto) minmax(min-content,auto) minmax(min-content,auto);height:100%;padding:.625em;overflow-x:hidden;background-color:#000;background-color:#0006}.dialog-content[_ngcontent-%COMP%]{display:grid;grid-column:2;grid-row:2;align-self:center;justify-self:center;position:relative;box-sizing:border-box;grid-template-columns:minmax(0,100%);width:32em;max-width:100%;padding:0 0 1.25em;border:none;border-radius:5px;background:#fff;color:#545454;font-family:inherit;font-size:1rem}.btn-close-modal[_ngcontent-%COMP%]{position:absolute;top:-.75rem;right:.5rem;font-size:2.5rem}@keyframes _ngcontent-%COMP%_slide-in-bottom{0%{transform:translateY(100%);opacity:0}to{transform:translateY(0);opacity:1}}@keyframes _ngcontent-%COMP%_slide-out-bottom{0%{transform:translateY(0);opacity:1}to{transform:translateY(100%);opacity:0}}.bottom-sheet-container[_ngcontent-%COMP%]{position:fixed;background-color:#4a4a50cc;height:100%;width:100%;bottom:0;left:0;z-index:1000;display:inline-block}.bottom-sheet-container__outside[_ngcontent-%COMP%]{height:100%;overflow:hidden}.bottom-sheet-container__content[_ngcontent-%COMP%]{z-index:100;background-color:#fff;min-height:30vh;padding:1rem 1rem 3rem;border-top-left-radius:1rem;border-top-right-radius:1rem;position:absolute;bottom:0;left:0;width:100%}.slideInBottom[_ngcontent-%COMP%]{-webkit-animation:_ngcontent-%COMP%_slide-in-bottom .3s;animation:_ngcontent-%COMP%_slide-in-bottom .3s;opacity:1}.slideInTop[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slide-out-bottom .5s ease-in-out forwards}.fadeInDown[_ngcontent-%COMP%]{-webkit-animation:_ngcontent-%COMP%_fadeInDown .3s;animation:_ngcontent-%COMP%_fadeInDown .3s;opacity:1}@-webkit-keyframes _ngcontent-%COMP%_fadeInDown{0%{opacity:0;-webkit-transform:translate3d(0,-100%,0);transform:translate3d(0,-100%,0)}to{opacity:1;-webkit-transform:translate3d(0,0,0);transform:translateZ(0)}}@keyframes _ngcontent-%COMP%_fadeInDown{0%{opacity:0;-webkit-transform:translate3d(0,-100%,0);transform:translate3d(0,-100%,0)}to{opacity:1;-webkit-transform:translate3d(0,0,0);transform:translateZ(0)}}.fadeOutUp[_ngcontent-%COMP%]{-webkit-animation:_ngcontent-%COMP%_fadeOutUp .4s;animation:_ngcontent-%COMP%_fadeOutUp .4s;animation-fill-mode:forwards;opacity:0}@-webkit-keyframes _ngcontent-%COMP%_fadeOutUp{0%{opacity:1}to{opacity:0;-webkit-transform:translate3d(0,-100%,0);transform:translate3d(0,-100%,0)}}@keyframes _ngcontent-%COMP%_fadeOutUp{0%{opacity:1}to{opacity:0;-webkit-transform:translate3d(0,-100%,0);transform:translate3d(0,-100%,0)}}.slideInUp[_ngcontent-%COMP%]{transition:all .4s ease;animation:_ngcontent-%COMP%_slideInUp .4s;opacity:1}@-webkit-keyframes _ngcontent-%COMP%_slideInUp{0%{transform:scale(1.2) translateZ(0);visibility:visible}to{transform:scale(1) translateZ(0)}}@keyframes _ngcontent-%COMP%_slideInUp{0%{transform:scale(1.2) translateZ(0);visibility:visible}to{transform:scale(1) translateZ(0)}}'],changeDetection:0});let o=t;return o})();var Be=(()=>{let t=class t{constructor(i,e){this.modalService=i,this.detectDevice=e,this.product=G.required()}showModal(){let e=this.detectDevice.isMobile()?"bottom-sheet":"dialog";this.modalService.open(Te,{mode:e,data:this.product()})}};t.\u0275fac=function(e){return new(e||t)(d(rt),d(q))},t.\u0275cmp=f({type:t,selectors:[["app-product-item"]],inputs:{product:[O.SignalBased,"product"]},decls:13,vars:4,consts:[["tabindex","0","role","button",1,"max-w-sm","bg-white","border","border-gray-200","rounded-lg","shadow",3,"click"],[1,"rounded-t-lg",3,"src","alt"],[1,"p-5"],[1,"mb-2","text-2xl","font-bold","tracking-tight","text-gray-900"],[1,"mb-3","font-normal","text-gray-700"],["tabindex","0","role","button","role","button",1,"inline-flex","items-center","px-3","py-2","text-sm","font-medium","text-center","text-white","bg-blue-700","rounded-lg","hover:bg-blue-800","focus:ring-4","focus:outline-none","focus:ring-blue-300",3,"click"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 14 10",1,"rtl:rotate-180","w-3.5","h-3.5","ms-2"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M1 5h12m0 0L9 1m4 4L9 9"]],template:function(e,n){e&1&&(a(0,"div",0),g("click",function(){return n.showModal()}),a(1,"div"),p(2,"img",1),r(),a(3,"div",2)(4,"div")(5,"h5",3),l(6),r()(),a(7,"p",4),l(8),r(),a(9,"div",5),g("click",function(){return n.showModal()}),l(10," Ver m\xE1s "),kt(),a(11,"svg",6),p(12,"path",7),r()()()()),e&2&&(c(2),m("src",n.product().thumbnail,W)("alt",n.product().title),c(4),C(" ",n.product().title," "),c(2),C(" ",n.product().description," "))},dependencies:[et],changeDetection:0});let o=t;return o})();var Re=(()=>{let t=class t{constructor(i,e){this.el=i,this.ngZone=e,this.nearEnd=jt(),this.elementClass=G(),Rt(()=>{this.runOutSide(()=>{let n=()=>this.elementClass()?document?.querySelector(`.${this.elementClass()}`)??document:document,u=n(),y=n()instanceof Element;this.subscription=yt(u,"scroll",{passive:!0}).subscribe(()=>{let Ue=window.document.documentElement.scrollHeight,ze=y?u.scrollHeight:window.document.documentElement.scrollHeight,bt=this.el.nativeElement.scrollHeight,Ye=y?u.scrollTop:window.scrollY,qe=window.innerHeight,$e=ze-bt;bt-qe-Ye+$e<Ue/(y?20:3)&&this.runInZone(()=>{this.nearEnd.emit()})})})})}ngOnDestroy(){this.runInZone(()=>{this.subscription?.unsubscribe?.()})}runOutSide(i){this.ngZone.runOutsideAngular(()=>{i()})}runInZone(i){this.ngZone.run(()=>{i()})}};t.\u0275fac=function(e){return new(e||t)(d(Q),d(Bt))},t.\u0275dir=It({type:t,selectors:[["","scrollEnd",""]],inputs:{elementClass:[O.SignalBased,"elementClass"]},outputs:{nearEnd:"nearEnd"},standalone:!0});let o=t;return o})();var ui=(o,t)=>t.id;function fi(o,t){if(o&1&&p(0,"app-product-item",1),o&2){let s=t.$implicit;m("product",s)}}var Le=(()=>{let t=class t{constructor(i){this.productService=i,this.products=b([]),this.metadataPagination=b(null),this.queryParams=b(structuredClone(re)),this.isLoadingAppend=b(!1),this.hasNextPage=K(()=>this.products().length!==this.metadataPagination().total)}ngOnInit(){this.getInitialData()}getInitialData(){this.productService.get(this.queryParams()).subscribe({next:({data:i,metadata:e})=>{this.products.set(i),this.metadataPagination.set(e)}})}onScroll(){this.hasNextPage()&&!this.isLoadingAppend()&&(this.queryParams.update(i=>Ct($({},i),{skip:i.skip+10})),this.appendData())}appendData(){this.isLoadingAppend.set(!0),this.productService.get(this.queryParams()).subscribe({next:({data:i,metadata:e})=>{this.metadataPagination.set(e),this.products.set([...this.products(),...i]),this.isLoadingAppend.set(!1)}})}};t.\u0275fac=function(e){return new(e||t)(d(_))},t.\u0275cmp=f({type:t,selectors:[["app-list-product-mobile"]],decls:3,vars:0,consts:[["scrollEnd","",1,"justify-center","max-w-screen-xl","grid","md:grid-cols-2","lg:grid-cols-3","2xl:lg:grid-cols-4","gap-5",3,"nearEnd"],[3,"product"]],template:function(e,n){e&1&&(a(0,"div",0),g("nearEnd",function(){return n.onScroll()}),U(1,fi,1,1,"app-product-item",1,ui),r()),e&2&&(c(),z(n.products()))},dependencies:[Re,Be],changeDetection:0});let o=t;return o})();var hi=[{path:"",canMatch:[Ne],component:De},{path:"",canMatch:[je],component:Le},{path:"create",component:Me},{path:"update/:id",resolve:{product:Oe},component:Ie}],Ve=(()=>{let t=class t{};t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=H({type:t}),t.\u0275inj=Z({imports:[ht.forChild(hi),ht]});let o=t;return o})();var _r=(()=>{let t=class t{};t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=H({type:t}),t.\u0275inj=Z({imports:[he,Ve,pe,ue,F,ve]});let o=t;return o})();export{_r as ProductModule};
